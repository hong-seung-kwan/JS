<!DOCTYPE html>
<html lang="ko">

<head>

</head>

<body>
  <script>

    // 함수 정의
    const func = function () {
      // 매개변수로 resolve와 reject 함수를 선언
      // promise를 처리할 때 사용
      // promise는 작업의 처리 상태에 따라 진행이 되는데
      // 진행을 시킬때 resolve와 reject함수를 사용
      return new Promise((resolve, reject) => {
        // 타이머 함수 추가
        // 5초가 지나면 resolve함수가 실행됨
        setTimeout(() => {
          //resolve('success!');
          reject(100); // 작업에 실패했을때 호출
        }, 5000);
      });
    }
    // 아직 5초가 되지 않았기 때문에 작업이 끝나지 않음
    // promise 객체의 현재상태는 pending(대기)

    // 다음 작업을 처리할때는 then() 또는 catch()함수를 사용할것

    // promise의 상태가 pending -> fulfilled가 되면 resolve 함수가 호출되고
    // promise의 상태가 pending -> reject가 되면 catch 함수가 실행
    // 이어서 then함수가 실행됨
    const pro = func();

    // then 함수는 다시 promise 객체를 반환
    // 다시 체이닝 기법을 사용하여 catch함수를 호출
    pro.
      then((responce)=>{
        console.log(responce);
    })
    .catch((result)=>{
      console.log(result);
    });

    // Promise 객체가 반환됬고 현재상태는 fulfilled (작업성공)
    // 작업에 성공했으면 이어서 then함수가 호출됨
    // 매개변수는 성공데이터 전달
    // func().then((res) => {
    //   console.log(res);
    // });
  </script>
</body>

</html>